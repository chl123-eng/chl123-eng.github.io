{"title":"记一次多页面配置后CDN配置失效问题，查看cli源码并解决问题","uid":"4ef67a396b8d10d036cface974a81940","slug":"记一次多页面配置后CDN配置失效问题，查看cli源码并解决问题","date":"2022-03-13T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/记一次多页面配置后CDN配置失效问题，查看cli源码并解决问题.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/single-app.png","content":"<p>某天的某天，产品总监突然给我一个任务，让我在主站加一个页面。由于主站之前已经是 nodeJs 了，在原有基础上进行原生页面编写费时费力，且没有很大的 SEO 需求。所以我使用了上次商家入驻，在 Vue3 SPA 原来的基础上进行多页面开发。</p>\n<h3 id=\"SPA-多页面配置的好处\"><a href=\"#SPA-多页面配置的好处\" class=\"headerlink\" title=\"SPA 多页面配置的好处\"></a>SPA 多页面配置的好处</h3><ol>\n<li>共享项目逻辑：作为新增加的页面，可以无缝地使用之前不相关业务的基建逻辑，如公用封装方法等。</li>\n<li>chunk 分离，业务分离，减少包大小：如果是在单入口的情况下增加一个新的路由，在主入口的 js 文件中势必会带上原有的部分业务逻辑，组件等。这样会增加请求时的包大小。</li>\n<li>自定义入口 TDK 有效，SEO 优化更精确</li>\n</ol>\n<h3 id=\"开始配置\"><a href=\"#开始配置\" class=\"headerlink\" title=\"开始配置\"></a>开始配置</h3><p>这里主要是通过 vue.config.js 入口进行配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// vue.config.js增加新配置项</span></span><br><span class=\"line\"><span class=\"attr\">pages</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 旧的商家入驻入口</span></span><br><span class=\"line\">  <span class=\"attr\">index</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;src/main.ts&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">template</span>: <span class=\"string\">&#x27;public/index.html&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;index.html&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">title</span>: <span class=\"string\">&#x27;Index Page&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">chunks</span>: [<span class=\"string\">&#x27;chunk-vendors&#x27;</span>, <span class=\"string\">&#x27;chunk-common&#x27;</span>, <span class=\"string\">&#x27;index&#x27;</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">share</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;src/share.ts&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">template</span>: <span class=\"string\">&#x27;public/share.html&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;share.html&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">title</span>: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">chunks</span>: [<span class=\"string\">&#x27;chunk-vendors&#x27;</span>, <span class=\"string\">&#x27;chunk-common&#x27;</span>, <span class=\"string\">&#x27;share&#x27;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"attr\">chainWebpack</span>: <span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cdn = &#123; .... &#125;</span><br><span class=\"line\">  config</span><br><span class=\"line\">    .<span class=\"title function_\">plugin</span>(<span class=\"string\">&#x27;html&#x27;</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">use</span>(<span class=\"title class_\">HtmlWebpackPlugin</span>)</span><br><span class=\"line\">    .<span class=\"title function_\">tap</span>(<span class=\"function\"><span class=\"params\">args</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(args);</span><br><span class=\"line\">      args[<span class=\"number\">0</span>].<span class=\"property\">cdn</span> = cdn</span><br><span class=\"line\">      args[<span class=\"number\">0</span>].<span class=\"property\">chunksSortMode</span> = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">      <span class=\"comment\">// args.cdn = assetsCDN.assets;</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> args</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>当我信誓旦旦地准备看到绿色打印时，却报了一个 **TypeError: Cannot set properties of undefined (setting ‘cdn’)**的错误，<br>于是，我打印了 args 的值，发现打印出来了一个空的数组。此时我做了一个猜想，重新使用了 HtmlWebpackPlugin 插件，会不会导致原有的配置被清空？</p>\n<h3 id=\"带着疑问解决问题。于是，我看了看-vue-cli4-的源码\"><a href=\"#带着疑问解决问题。于是，我看了看-vue-cli4-的源码\" class=\"headerlink\" title=\"带着疑问解决问题。于是，我看了看 vue-cli4 的源码\"></a>带着疑问解决问题。于是，我看了看 vue-cli4 的源码</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 当我们运行vue-cli-service run serve 相当于直接调用以下指令</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Service</span>(...).<span class=\"title function_\">run</span>(<span class=\"string\">&#x27;serve&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 下面是主要运行过程的简化版代码</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">class</span> <span class=\"title class_\">Service</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span> (context, &#123; plugins, pkg, inlineOptions, useBuiltIn &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    process.<span class=\"property\">VUE_CLI_SERVICE</span> = <span class=\"variable language_\">this</span></span><br><span class=\"line\">    <span class=\"comment\">// 初始化chainWebpack链式调用配置，存储所有的chainWebapck配置链</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">webpackChainFns</span> = []</span><br><span class=\"line\">    <span class=\"comment\">// 初始化webpackConfigure配置</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">webpackRawConfigFns</span> = []</span><br><span class=\"line\">    <span class=\"comment\">// 初始化所有的webpackChain链式</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">plugins</span> = <span class=\"variable language_\">this</span>.<span class=\"title function_\">resolvePlugins</span>(plugins, useBuiltIn)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">async</span> run (name, args = &#123;&#125;, rawArgv = []) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"title function_\">init</span>()</span><br><span class=\"line\">    <span class=\"comment\">// 当指令为serve时 其实是调用了/vue-cli-4/packages/@vue/cli-service/lib/commands/serve.js里面的运行逻辑</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; fn &#125; = command</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">fn</span>(args, rawArgv)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">init</span>(<span class=\"params\">mode</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 应用所有plugins数组的插件插件</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">plugins</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">&#123; id, apply &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">pluginsToSkip</span>.<span class=\"title function_\">has</span>(id)) <span class=\"keyword\">return</span></span><br><span class=\"line\">      <span class=\"title function_\">apply</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">PluginAPI</span>(id, <span class=\"variable language_\">this</span>), <span class=\"variable language_\">this</span>.<span class=\"property\">projectOptions</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable language_\">this</span>.<span class=\"property\">projectOptions</span>.<span class=\"property\">chainWebpack</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">webpackChainFns</span>.<span class=\"title function_\">push</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">projectOptions</span>.<span class=\"property\">chainWebpack</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resolvePlugins (inlinePlugins, useBuiltIn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">idToPlugin</span> = id =&gt; (&#123;</span><br><span class=\"line\">      <span class=\"attr\">id</span>: id.<span class=\"title function_\">replace</span>(<span class=\"regexp\">/^.\\//</span>, <span class=\"string\">&#x27;built-in:&#x27;</span>),</span><br><span class=\"line\">      <span class=\"attr\">apply</span>: <span class=\"built_in\">require</span>(id)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> plugins</span><br><span class=\"line\">    <span class=\"comment\">// 每一个内置的js都按顺序require一次</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> builtInPlugins = [</span><br><span class=\"line\">      <span class=\"string\">&#x27;./commands/serve&#x27;</span>,</span><br><span class=\"line\">      <span class=\"string\">&#x27;...&#x27;</span>, <span class=\"comment\">// 其他插件省略</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;./config/app&#x27;</span></span><br><span class=\"line\">    ].<span class=\"title function_\">map</span>(idToPlugin)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 引入所有的内置插件文件，最后存储在this.plugins数组里面</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> projectPlugins = <span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">pkg</span>.<span class=\"property\">devDependencies</span> || &#123;&#125;)</span><br><span class=\"line\">      .<span class=\"title function_\">concat</span>(<span class=\"title class_\">Object</span>.<span class=\"title function_\">keys</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">pkg</span>.<span class=\"property\">dependencies</span> || &#123;&#125;))</span><br><span class=\"line\">      .<span class=\"title function_\">filter</span>(isPlugin)</span><br><span class=\"line\">      .<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">id</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (</span><br><span class=\"line\">          <span class=\"variable language_\">this</span>.<span class=\"property\">pkg</span>.<span class=\"property\">optionalDependencies</span> &amp;&amp;</span><br><span class=\"line\">          id <span class=\"keyword\">in</span> <span class=\"variable language_\">this</span>.<span class=\"property\">pkg</span>.<span class=\"property\">optionalDependencies</span></span><br><span class=\"line\">        ) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> <span class=\"title function_\">apply</span> = (<span class=\"params\"></span>) =&gt; &#123;&#125;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            apply = <span class=\"built_in\">require</span>(id)</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">warn</span>(<span class=\"string\">`Optional dependency <span class=\"subst\">$&#123;id&#125;</span> is not installed.`</span>)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">return</span> &#123; id, apply &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"title function_\">idToPlugin</span>(id)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    plugins = builtInPlugins.<span class=\"title function_\">concat</span>(projectPlugins)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> plugins</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 解析webpackChain</span></span><br><span class=\"line\">  resolveChainableWebpackConfig () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> chainableConfig = <span class=\"keyword\">new</span> <span class=\"title class_\">Config</span>()</span><br><span class=\"line\">    <span class=\"comment\">// config作为实例，链式调用所有方法，应用所有WebpackChain配置</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">webpackChainFns</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> <span class=\"title function_\">fn</span>(chainableConfig))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> te</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 在混合/vue-cli-4/packages/@vue/cli-service/lib/commands下的所有配置</span></span><br><span class=\"line\">  resolveWebpackConfig (chainableConfig = <span class=\"variable language_\">this</span>.<span class=\"title function_\">resolveChainableWebpackConfig</span>()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 所有chainWebpack配置初始化成webpackCompiler(options)模式</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> config = chainableConfig.<span class=\"title function_\">toConfig</span>()</span><br><span class=\"line\">    <span class=\"keyword\">const</span> original = config</span><br><span class=\"line\">    <span class=\"comment\">// 和configureWebapck混合</span></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">webpackRawConfigFns</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> fn === <span class=\"string\">&#x27;function&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// function with optional return value</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> res = <span class=\"title function_\">fn</span>(config)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (res) config = <span class=\"title function_\">merge</span>(config, res)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fn) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// merge literal values</span></span><br><span class=\"line\">        config = <span class=\"title function_\">merge</span>(config, fn)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// packages/@vue/cli-service/lib/PluginAPI.js</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">PluginAPI</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span> (id, service) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">id</span> = id</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">service</span> = service</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resolveWebpackConfig (chainableConfig) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"title function_\">resolveWebpackConfig</span>(chainableConfig)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  chainWebpack (fn) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">service</span>.<span class=\"property\">webpackChainFns</span>.<span class=\"title function_\">push</span>(fn)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// vue-cli4/packages/@vue/cli-service/lib/commands/serve.js</span></span><br><span class=\"line\"><span class=\"comment\">// 上面Sevice类的run方法最终调用了当前类的serve方法，在这里调用了新增Plugins的resolveWebpackConfig</span></span><br><span class=\"line\"><span class=\"comment\">// 也就是Service类的resolveWebpackConfig方法</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"function\">(<span class=\"params\">api, options</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  api.<span class=\"title function_\">registerCommand</span>(<span class=\"string\">&#x27;serve&#x27;</span>, &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">serve</span> (args) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// resolve webpack config</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> webpackConfig = api.<span class=\"title function_\">resolveWebpackConfig</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>.<span class=\"property\">defaultModes</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">serve</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>从上面代码就可以分析到，vue-cli 是按以下顺序来执行的，</p>\n<ol>\n<li>Vue-cli 初始化时会使用所有&#x2F;cli-service&#x2F;lib&#x2F;commands，&#x2F;cli-service&#x2F;lib&#x2F;config 内的顺序来获取 webpackChain 的配置，塞入 Service 实例的 webpackChainFns 中。</li>\n<li>&#x2F;cli-service&#x2F;lib&#x2F;commands 内的插件一般是作为运行插件的，并不会像&#x2F;cli-service&#x2F;lib&#x2F;commands 内的插件一样，一直接调用就直接塞入 webpackChainFns，<br>而是在 Plugins 具体调用内部函数的 registerCommand(‘serve’)注册为启动函数后，才会最终调用。</li>\n<li>我们在 vue.config.js 配置的 webpackChain 配置在代码逻辑中是在&#x2F;cli-service&#x2F;lib&#x2F;config 的 webpackChain 配置收集完才推入 webpackChainFns 中，这也印证了为什么我们的 html-webpack-plugin 配置之后，原来的多页&#x2F;单页配置会被覆盖掉。</li>\n</ol>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>说了这么多，那究竟该怎么配置呢，有 2 种办法。</p>\n<ol>\n<li>一种就是在原来的 pages 项上加入 cdn 这个 key</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// vue.config.js增加新配置项</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">pages</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 旧的商家入驻入口</span></span><br><span class=\"line\">    <span class=\"attr\">index</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">entry</span>: <span class=\"string\">&quot;src/main.ts&quot;</span>,</span><br><span class=\"line\">      ...其他参数省略,</span><br><span class=\"line\">      <span class=\"attr\">cdn</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">js</span>: [</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue.global@3.0.11.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue-router.global@4.0.6.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vuex.global@4.0.0.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/axios.min.js&quot;</span>,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">share</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">entry</span>: <span class=\"string\">&quot;src/share.ts&quot;</span>,</span><br><span class=\"line\">      ...其他参数省略,</span><br><span class=\"line\">      <span class=\"attr\">cdn</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">js</span>: [</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue.global@3.0.11.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue-router.global@4.0.6.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vuex.global@4.0.0.js&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/axios.min.js&quot;</span>,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>第二种种就是重写 html-webpack-plugins 的 entry 的模板配置</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">pages</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">index</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">entry</span>: <span class=\"string\">&quot;src/main.ts&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">chunks</span>: [<span class=\"string\">&quot;chunk-vendors&quot;</span>, <span class=\"string\">&quot;chunk-common&quot;</span>, <span class=\"string\">&quot;index&quot;</span>],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">share</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">entry</span>: <span class=\"string\">&quot;src/share.ts&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">chunks</span>: [<span class=\"string\">&quot;chunk-vendors&quot;</span>, <span class=\"string\">&quot;chunk-common&quot;</span>, <span class=\"string\">&quot;share&quot;</span>],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">chainWebpack</span>: <span class=\"function\">(<span class=\"params\">config</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> cdn = &#123;</span><br><span class=\"line\">      <span class=\"attr\">js</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue.global@3.0.11.js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vue-router.global@4.0.6.js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/vuex.global@4.0.0.js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;https://static.wbiao.co/libs/cdn/axios.min.js&quot;</span>,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    config</span><br><span class=\"line\">      .<span class=\"title function_\">plugin</span>(<span class=\"string\">&quot;html&quot;</span>)</span><br><span class=\"line\">      .<span class=\"title function_\">use</span>(<span class=\"title class_\">HtmlWebpackPlugin</span>)</span><br><span class=\"line\">      .<span class=\"title function_\">tap</span>(<span class=\"function\">(<span class=\"params\">args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        args[<span class=\"number\">0</span>] = &#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: <span class=\"string\">&quot;wanbiao&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">cdn</span>: cdn,</span><br><span class=\"line\">          <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">collapseBooleanAttributes</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">removeScriptTypeAttributes</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"attr\">template</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;./public/index.html&quot;</span>),</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        args[<span class=\"number\">1</span>] = &#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: <span class=\"string\">&quot;wb2&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">cdn</span>: cdn,</span><br><span class=\"line\">          <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">collapseBooleanAttributes</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"attr\">removeScriptTypeAttributes</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          <span class=\"attr\">template</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;./public/share.html&quot;</span>),</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        args[<span class=\"number\">0</span>].<span class=\"property\">cdn</span> = cdn;</span><br><span class=\"line\">        args[<span class=\"number\">0</span>].<span class=\"property\">chunksSortMode</span> = <span class=\"string\">&quot;none&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">// args.cdn = assetsCDN.assets;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> args;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"基础模板展示\"><a href=\"#基础模板展示\" class=\"headerlink\" title=\"基础模板展示\"></a>基础模板展示</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;renderer&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;webkit&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;force-rendering&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;webkit&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=Edge,chrome=1&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;icon&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/favicon.ico&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>&lt;%= process.env.VUE_APP_TITLE %&gt;<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 使用CDN的CSS文件 --&gt;</span></span><br><span class=\"line\">    &lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp;</span><br><span class=\"line\">    htmlWebpackPlugin.options.cdn.css) &#123; %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot;</span> /&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 使用CDN的JS文件 --&gt;</span></span><br><span class=\"line\">    &lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp;</span><br><span class=\"line\">    htmlWebpackPlugin.options.cdn.js) &#123; %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">src</span>=<span class=\"string\">&quot;&lt;%= htmlWebpackPlugin.options.cdn.js[i] %&gt;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    &lt;% &#125; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">strong</span></span></span><br><span class=\"line\"><span class=\"tag\">        &gt;</span>We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work</span><br><span class=\"line\">        properly without JavaScript enabled. Please enable it to</span><br><span class=\"line\">        continue.&lt;/strong</span><br><span class=\"line\">      &gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","text":"某天的某天，产品总监突然给我一个任务，让我在主站加一个页面。由于主站之前已经是 nodeJs 了，在原有基础上进行原生页面编写费时费力，且没有很大的 SEO 需...","permalink":"/post/记一次多页面配置后CDN配置失效问题，查看cli源码并解决问题","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"经验","slug":"经验","count":6,"path":"api/categories/经验.json"},{"name":"单页应用","slug":"经验/单页应用","count":1,"path":"api/categories/经验/单页应用.json"}],"tags":[{"name":"vue","slug":"vue","count":2,"path":"api/tags/vue.json"},{"name":"单页应用","slug":"单页应用","count":1,"path":"api/tags/单页应用.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SPA-%E5%A4%9A%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E7%9A%84%E5%A5%BD%E5%A4%84\"><span class=\"toc-text\">SPA 多页面配置的好处</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">开始配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B8%A6%E7%9D%80%E7%96%91%E9%97%AE%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E3%80%82%E4%BA%8E%E6%98%AF%EF%BC%8C%E6%88%91%E7%9C%8B%E4%BA%86%E7%9C%8B-vue-cli4-%E7%9A%84%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">带着疑问解决问题。于是，我看了看 vue-cli4 的源码</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\"><span class=\"toc-text\">解决办法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF%E5%B1%95%E7%A4%BA\"><span class=\"toc-text\">基础模板展示</span></a></li></ol>","author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"StoryBook-为万表组件库提供文档说明","uid":"8940855b891d4b3c9c870535631ad9ab","slug":"StoryBook-为万表组件库提供文档说明","date":"2022-11-22T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/StoryBook-为万表组件库提供文档说明.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/sb01.png","text":"前言对于公司级组件库来说，服务于业务的组件存在着参数较多，参数经常记不住问题。而且，脆弱的在线调试也为组件使用产生了很大的不便，好在出现了 StoryBook ...","permalink":"/post/StoryBook-为万表组件库提供文档说明","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"经验","slug":"经验","count":6,"path":"api/categories/经验.json"},{"name":"Vue","slug":"经验/Vue","count":1,"path":"api/categories/经验/Vue.json"}],"tags":[{"name":"Vue","slug":"Vue","count":8,"path":"api/tags/Vue.json"},{"name":"组件库","slug":"组件库","count":2,"path":"api/tags/组件库.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Webpack4优化之依赖包cdn加载优化","uid":"18236e9a0226f101897836af69d7e11a","slug":"Webpack4优化之依赖包cdn加载优化","date":"2022-03-04T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/Webpack4优化之依赖包cdn加载优化.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/webpack.png","text":"记录一下自己项目使用 cdn 加速的具体过程，就是分离外部库的包(包括 vue, vue-router, vuex 等)，尽量只保留主要逻辑 准备工作首先确定一...","permalink":"/post/Webpack4优化之依赖包cdn加载优化","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"webpack","slug":"webpack","count":2,"path":"api/categories/webpack.json"},{"name":"总结","slug":"webpack/总结","count":2,"path":"api/categories/webpack/总结.json"},{"name":"Vue","slug":"webpack/总结/Vue","count":1,"path":"api/categories/webpack/总结/Vue.json"}],"tags":[{"name":"webpack","slug":"webpack","count":2,"path":"api/tags/webpack.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}