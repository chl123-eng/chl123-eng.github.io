{"title":"懂表帝项目阶段性总结","uid":"c583867df2db339c8477f09807897308","slug":"懂表帝项目阶段性总结","date":"2021-09-02T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/懂表帝项目阶段性总结.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/dbd1.jpg","content":"<p>uni-app 懂表帝小程序 v2.1.0 已经发布上线，现在针对里面遇到的一些小问题做一下阶段性的复盘</p>\n<h2 id=\"安卓-P30-下点击-input-框聚焦后点击其他-dom，input-框的-blur-周期没有触发导致底部栏悬空不下坠，大概样子如下图\"><a href=\"#安卓-P30-下点击-input-框聚焦后点击其他-dom，input-框的-blur-周期没有触发导致底部栏悬空不下坠，大概样子如下图\" class=\"headerlink\" title=\"安卓 P30 下点击 input 框聚焦后点击其他 dom，input 框的 blur 周期没有触发导致底部栏悬空不下坠，大概样子如下图\"></a>安卓 P30 下点击 input 框聚焦后点击其他 dom，input 框的 blur 周期没有触发导致底部栏悬空不下坠，大概样子如下图</h2><p><img src=\"http://www.xiesmallxie.cn/20210903154855.jpg?imageMogr2/thumbnail/!40p\"></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// sendMessage.vue</span></span><br><span class=\"line\">&lt;wb-safe-footer</span><br><span class=\"line\">  :customStyle=<span class=\"string\">&quot;&#123; bottom: bottom + &#x27;px&#x27;, zIndex: 999 &#125;&quot;</span></span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;send-message&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">...</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">ref</span>=<span class=\"string\">&quot;input&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;message&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      <span class=\"attr\">confirm-type</span>=<span class=\"string\">&quot;send&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      @<span class=\"attr\">focus</span>=<span class=\"string\">&quot;handleFoucs&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">      @<span class=\"attr\">blur</span>=<span class=\"string\">&quot;handleBlur&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/wb-safe-footer&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"comment\">// 聚焦</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"title function_\">handleFocus</span>(<span class=\"params\">&#123; mp &#125;</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">this</span>.<span class=\"property\">bottom</span> = mp.<span class=\"property\">detail</span>.<span class=\"property\">height</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;focus&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  &#125;,</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"comment\">// 失焦</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"title function_\">handleBlur</span>(<span class=\"params\"></span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;blur&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">    <span class=\"variable language_\">this</span>.<span class=\"property\">bottom</span> = <span class=\"number\">0</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  &#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>大概代码如上,通过 blur 改变 bottom 值，但是 blur 不触发 只好在外部函数内直接调用 handleBlur 方法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// shortVideo.vue</span></span><br><span class=\"line\">&lt;comments</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  @close=<span class=\"string\">&quot;closeCommentsPopup&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">/&gt;</span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">send-message</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">  <span class=\"attr\">...</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">  <span class=\"attr\">ref</span>=<span class=\"string\">&quot;sendMessage&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">/&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"comment\">// 关闭弹框</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"title function_\">closeCommentsPopup</span>(<span class=\"params\"></span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"comment\">// 解决华为P30下键盘向下没触发input框的blur钩子问题</span></span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">sendMessage</span>.<span class=\"title function_\">handleBlur</span>()</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"华为-P30-和小米-8-下-chooseImage-导致空栏目问题\"><a href=\"#华为-P30-和小米-8-下-chooseImage-导致空栏目问题\" class=\"headerlink\" title=\"华为 P30 和小米 8 下 chooseImage 导致空栏目问题\"></a>华为 P30 和小米 8 下 chooseImage 导致空栏目问题</h2><p><img src=\"http://www.xiesmallxie.cn/20210903162712.png?imageMogr2/thumbnail/!80p\"></p>\n<p>解决办法：用 showModel 模拟出两个选择方式的状态</p>\n","text":"uni-app 懂表帝小程序 v2.1.0 已经发布上线，现在针对里面遇到的一些小问题做一下阶段性的复盘 安卓 P30 下点击 input 框聚焦后点击其他 d...","permalink":"/post/懂表帝项目阶段性总结","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"uni-app","slug":"uni-app","count":3,"path":"api/categories/uni-app.json"}],"tags":[{"name":"uni-app","slug":"uni-app","count":4,"path":"api/tags/uni-app.json"},{"name":"懂表帝","slug":"懂表帝","count":1,"path":"api/tags/懂表帝.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E5%8D%93-P30-%E4%B8%8B%E7%82%B9%E5%87%BB-input-%E6%A1%86%E8%81%9A%E7%84%A6%E5%90%8E%E7%82%B9%E5%87%BB%E5%85%B6%E4%BB%96-dom%EF%BC%8Cinput-%E6%A1%86%E7%9A%84-blur-%E5%91%A8%E6%9C%9F%E6%B2%A1%E6%9C%89%E8%A7%A6%E5%8F%91%E5%AF%BC%E8%87%B4%E5%BA%95%E9%83%A8%E6%A0%8F%E6%82%AC%E7%A9%BA%E4%B8%8D%E4%B8%8B%E5%9D%A0%EF%BC%8C%E5%A4%A7%E6%A6%82%E6%A0%B7%E5%AD%90%E5%A6%82%E4%B8%8B%E5%9B%BE\"><span class=\"toc-text\">安卓 P30 下点击 input 框聚焦后点击其他 dom，input 框的 blur 周期没有触发导致底部栏悬空不下坠，大概样子如下图</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%8E%E4%B8%BA-P30-%E5%92%8C%E5%B0%8F%E7%B1%B3-8-%E4%B8%8B-chooseImage-%E5%AF%BC%E8%87%B4%E7%A9%BA%E6%A0%8F%E7%9B%AE%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">华为 P30 和小米 8 下 chooseImage 导致空栏目问题</span></a></li></ol>","author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"uni-app实现京东canvas拍照识图功能","uid":"b2c8fccb8cb0e13a9e85ff1f7f24091a","slug":"uni-app实现京东canvas拍照识图功能","date":"2021-11-13T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/uni-app实现京东canvas拍照识图功能.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://www.xiesmallxie.cn/20210609102048.jpeg?imageMogr2/thumbnail/!50p","text":" 最近公司出了一个新的功能模块(如下图)，大提上可以描述为实现拍照完上传图片，拖动四方框拍照完成上传功能，大体样子如下图。但是我找遍了 dcloud 插件市场，...","permalink":"/post/uni-app实现京东canvas拍照识图功能","photos":[],"count_time":{"symbolsCount":"9.6k","symbolsTime":"9 mins."},"categories":[{"name":"uni-app","slug":"uni-app","count":3,"path":"api/categories/uni-app.json"}],"tags":[{"name":"uni-app","slug":"uni-app","count":4,"path":"api/tags/uni-app.json"},{"name":"canvas","slug":"canvas","count":3,"path":"api/tags/canvas.json"},{"name":"微信小程序","slug":"微信小程序","count":2,"path":"api/tags/微信小程序.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"服务器之正向代理和反向代理","uid":"d02145c722134b6141381c5add87923b","slug":"服务器之正向代理和反向代理","date":"2021-07-27T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/服务器之正向代理和反向代理.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/http01.png","text":"最近公司商家入驻准备上线，和运维在服务器代理这边折腾了不少时间，现在重新归纳一下正向代理和反向代理的相关概念和区别 正向代理简述：正向代理服务器作接受来自客户端...","permalink":"/post/服务器之正向代理和反向代理","photos":[],"count_time":{"symbolsCount":908,"symbolsTime":"1 mins."},"categories":[{"name":"总结","slug":"总结","count":1,"path":"api/categories/总结.json"}],"tags":[{"name":"http","slug":"http","count":4,"path":"api/tags/http.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}