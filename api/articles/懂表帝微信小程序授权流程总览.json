{"title":"懂表帝微信小程序授权流程总览","uid":"fb926e417168eb419b385ba9a5f127a1","slug":"懂表帝微信小程序授权流程总览","date":"2021-07-02T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/懂表帝微信小程序授权流程总览.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/auth.jpg","content":"<p>之前微信小程序官方使用了新的 wx.getUserProfile 替换了旧的 wx.getUserInfo，因为做了很多小程序的登录授权，一段时间不接触之后又会忘记。在此先记录下来新版本的授权流程</p>\n<h2 id=\"明确某些值的概念\"><a href=\"#明确某些值的概念\" class=\"headerlink\" title=\"明确某些值的概念\"></a>明确某些值的概念</h2><ol>\n<li>code：用户登录标识（有效期五分钟），由 wx.Login 返回</li>\n<li>encryptedData：包括敏感数据在内的完整用户信息的加密数据，wx.getUserProfile 或 <button open-type=\"getPhoneNumber\" /> 等 api 返回</li>\n<li>iv：加密算法的初始向量，wx.getUserProfile 或 <button open-type=\"getPhoneNumber\" /> 等 api 返回</li>\n<li>cloudID：开通云开发的小程序才会返回，可通过云调用直接获取开放数据，wx.getUserProfile 或 <button open-type=\"getPhoneNumber\" /> 等 api 返回</li>\n<li>userInfo：授权时的用户数据，wx.getUserProfile 返回</li>\n<li>appId：小程序的唯一标识, 注册小程序时自动生成</li>\n<li>unionId：用户的唯一标识, 调用后端的登录接口后返回</li>\n<li>openId：用户在微信开放平台帐号下的唯一标识, 调用后端的登录接口后返回</li>\n</ol>\n<h2 id=\"懂表帝微信登录结构图整理\"><a href=\"#懂表帝微信登录结构图整理\" class=\"headerlink\" title=\"懂表帝微信登录结构图整理\"></a>懂表帝微信登录结构图整理</h2><p><img src=\"http://www.xiesmallxie.cn/20211215180853.png\"></p>\n<h2 id=\"下面这张是微信官方的授权流程图，参考使用\"><a href=\"#下面这张是微信官方的授权流程图，参考使用\" class=\"headerlink\" title=\"下面这张是微信官方的授权流程图，参考使用\"></a>下面这张是微信官方的授权流程图，参考使用</h2><p><img src=\"http://www.xiesmallxie.cn/20211215181043.jpg\"></p>\n","text":"之前微信小程序官方使用了新的 wx.getUserProfile 替换了旧的 wx.getUserInfo，因为做了很多小程序的登录授权，一段时间不接触之后又会...","permalink":"/post/懂表帝微信小程序授权流程总览","photos":[],"count_time":{"symbolsCount":487,"symbolsTime":"1 mins."},"categories":[{"name":"业务流程","slug":"业务流程","count":1,"path":"api/categories/业务流程.json"}],"tags":[{"name":"小程序","slug":"小程序","count":1,"path":"api/tags/小程序.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%98%8E%E7%A1%AE%E6%9F%90%E4%BA%9B%E5%80%BC%E7%9A%84%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">明确某些值的概念</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%87%82%E8%A1%A8%E5%B8%9D%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E7%BB%93%E6%9E%84%E5%9B%BE%E6%95%B4%E7%90%86\"><span class=\"toc-text\">懂表帝微信登录结构图整理</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E9%9D%A2%E8%BF%99%E5%BC%A0%E6%98%AF%E5%BE%AE%E4%BF%A1%E5%AE%98%E6%96%B9%E7%9A%84%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B%E5%9B%BE%EF%BC%8C%E5%8F%82%E8%80%83%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">下面这张是微信官方的授权流程图，参考使用</span></a></li></ol>","author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Http权威指南阅读总结","uid":"e9c62f00849307d6c77e106ff0b62f1c","slug":"Http权威指南阅读总结","date":"2021-07-04T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/Http权威指南阅读总结.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/nw01.jpeg","text":"HTTP权威指南...","permalink":"/post/Http权威指南阅读总结","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"http","slug":"http","count":2,"path":"api/categories/http.json"}],"tags":[{"name":"http","slug":"http","count":4,"path":"api/tags/http.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Dcloud的Canvas插件二次改写为Vue模板","uid":"ed256b7d0dc1c9858a4d40687aeaf04d","slug":"Dcloud的Canvas插件二次改写为Vue模板","date":"2021-06-30T16:00:00.000Z","updated":"2024-06-07T03:20:18.000Z","comments":true,"path":"api/articles/Dcloud的Canvas插件二次改写为Vue模板.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://www.xiesmallxie.cn/canvas_drawer.jpg","text":"由于公司用的海报图插件都是使用的canvas_drawer插件来绘制海报图，由于是 18 年的插件，且只支持微信小程序原生语法。如果有其他客户端小程序的要求下是...","permalink":"/post/Dcloud的Canvas插件二次改写为Vue模板","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"uni-app","slug":"uni-app","count":3,"path":"api/categories/uni-app.json"}],"tags":[{"name":"uni-app","slug":"uni-app","count":4,"path":"api/tags/uni-app.json"},{"name":"canvas","slug":"canvas","count":3,"path":"api/tags/canvas.json"}],"author":{"name":"谢小谢","slug":"blog-author","avatar":"https://blog-1300014307.cos.ap-guangzhou.myqcloud.com/logo24.png","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}