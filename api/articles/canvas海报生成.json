{"title":"canvas海报生成","uid":"335d9cb5036a0b096de0cd53f0ef9182","slug":"canvas海报生成","date":"2024-08-27T09:44:24.000Z","updated":"2024-08-27T09:48:16.120Z","comments":true,"path":"api/articles/canvas海报生成.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/switchTab1.jpg","content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>生成商品海报进行分享或保存</p>\n<h4 id=\"安装html2canvas，引入\"><a href=\"#安装html2canvas，引入\" class=\"headerlink\" title=\"安装html2canvas，引入\"></a>安装html2canvas，引入</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install html2canvas</span><br><span class=\"line\"></span><br><span class=\"line\">import html2canvas from &#x27;html2canvas&#x27;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"生成海报方法\"><a href=\"#生成海报方法\" class=\"headerlink\" title=\"生成海报方法\"></a>生成海报方法</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">generateImage(e, ownerFun) &#123;</span><br><span class=\"line\">    setTimeout(() =&gt; &#123;</span><br><span class=\"line\">        const dom = document.getElementById(&#x27;share2&#x27;) // 需要生成图片内容的 dom 节点</span><br><span class=\"line\">        html2canvas(dom, &#123;</span><br><span class=\"line\">            width: dom.clientWidth, //dom 原始宽度</span><br><span class=\"line\">            height: dom.clientHeight,</span><br><span class=\"line\">            scrollY: 0, // html2canvas默认绘制视图内的页面，需要把scrollY，scrollX设置为0</span><br><span class=\"line\">            scrollX: 0,</span><br><span class=\"line\">            useCORS: true, //支持跨域</span><br><span class=\"line\">            scale: 2, // 设置生成图片的像素比例，默认是1，如果生成的图片模糊的话可以开启该配置项</span><br><span class=\"line\">        &#125;).then((canvas) =&gt; &#123;</span><br><span class=\"line\">            console.log(canvas.toDataURL(&#x27;image/png&#x27;));</span><br><span class=\"line\">            // 生成成功</span><br><span class=\"line\">            // html2canvas 生成成功的图片链接需要转成 base64位的url</span><br><span class=\"line\">            ownerFun.callMethod(&#x27;receiveRenderData&#x27;, canvas.toDataURL(&#x27;image/png&#x27;))</span><br><span class=\"line\">        &#125;).catch(err =&gt; &#123;</span><br><span class=\"line\">            ownerFun.callMethod(&#x27;_errAlert&#x27;, `【生成图片失败，请重试】$&#123;err&#125;`)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;, 300)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>","text":"前言生成商品海报进行分享或保存 安装html2canvas，引入123npm install html2canvasimport html2canvas fro...","permalink":"/post/canvas海报生成","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"总结","slug":"总结","count":3,"path":"api/categories/总结.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85html2canvas%EF%BC%8C%E5%BC%95%E5%85%A5\"><span class=\"toc-text\">安装html2canvas，引入</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%94%9F%E6%88%90%E6%B5%B7%E6%8A%A5%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">生成海报方法</span></a></li></ol></li></ol>","author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"canvas图片压缩上传","uid":"fc9692fb8852291ea0c5a4e4a14a397d","slug":"canvas图片压缩上传","date":"2024-08-28T03:05:04.000Z","updated":"2024-08-29T06:18:38.716Z","comments":true,"path":"api/articles/canvas图片压缩上传.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/compress.jpg","text":"前言uni-app实现将图片压缩后上传到服务器，实现方式：新建canvas画布，设置尺寸来实现压缩，同时显示了图片格式 代码实现1234567891011121...","permalink":"/post/canvas图片压缩上传","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"14 mins."},"categories":[{"name":"常用组件封装","slug":"常用组件封装","count":2,"path":"api/categories/常用组件封装.json"}],"tags":[],"author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"正反向+单选多选混合tab","uid":"960fe60f0dc6309e87c4e151c3c61926","slug":"正反向-单选多选混合tab","date":"2024-08-23T09:49:03.000Z","updated":"2024-08-23T09:57:31.206Z","comments":true,"path":"api/articles/正反向-单选多选混合tab.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/switchTab1.jpg","text":" 前言因为业务上多处地方使用到这样的功能组件，为了降低代码冗余率，增强代码复用性，因为封装了公用组件 使用场景：存在单选、多选；某个选项有正向排列和反向排列的选...","permalink":"/post/正反向-单选多选混合tab","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"常用组件封装","slug":"常用组件封装","count":2,"path":"api/categories/常用组件封装.json"}],"tags":[{"name":"常用组件封装","slug":"常用组件封装","count":1,"path":"api/tags/常用组件封装.json"}],"author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}