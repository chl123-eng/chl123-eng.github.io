{"title":"uniapp之语音识别","uid":"4407c684d9dcb340bbb7fb0a49aa746d","slug":"uniapp之语音识别","date":"2024-05-23T03:42:24.000Z","updated":"2024-06-27T06:13:38.318Z","comments":true,"path":"api/articles/uniapp之语音识别.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":null,"content":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><p>在hbuilder中引入百度语音识别集成平台，实现&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">AI语音识别</span>&nbsp;&nbsp;</p>\n\n<div style=\"display: flex;justify-content: center;\">\n    <img src='https://chlblog.oss-cn-guangzhou.aliyuncs.com/yuyinshibie1.jpg' style=\"width: 200px\" />\n</div>\n\n<h3 id=\"操作方式\"><a href=\"#操作方式\" class=\"headerlink\" title=\"操作方式\"></a>操作方式</h3><h4 id=\"引入百度语音\"><a href=\"#引入百度语音\" class=\"headerlink\" title=\"引入百度语音\"></a>引入百度语音</h4><p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">manifest.json</span>&nbsp;&nbsp;文件</p>\n\n<div><img src='https://chlblog.oss-cn-guangzhou.aliyuncs.com/yuyinshibie2.png' style=\"width: 200px\" /></dix>\n\n<h4 id=\"百度-AI-平台获取-key-值\"><a href=\"#百度-AI-平台获取-key-值\" class=\"headerlink\" title=\"百度 AI 平台获取 key 值\"></a>百度 AI 平台获取 key 值</h4><p><a href=\"https://blog.csdn.net/zcs2632008/article/details/123306370\">https://blog.csdn.net/zcs2632008/article/details/123306370</a></p>\n<h4 id=\"唤起百度语音\"><a href=\"#唤起百度语音\" class=\"headerlink\" title=\"唤起百度语音\"></a>唤起百度语音</h4><p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">@longpress</span>&nbsp;&nbsp;长按屏幕</p><p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">@touchend</span>&nbsp;&nbsp;松开触碰</p>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> &lt;view class=&quot;img&quot;</span><br><span class=\"line\">    :class=&quot;longPressing ? &#x27;longPressing&#x27; : &#x27;&#x27;&quot;</span><br><span class=\"line\">    @longpress=&quot;startRecognize&quot; @touchend=&quot;endRecognize&quot; @touchmove=&quot;endRecognize&quot;&gt;</span><br><span class=\"line\">    &lt;image</span><br><span class=\"line\">        src=&quot;https://yizhu-new.oss-cn-shenzhen.aliyuncs.com/app_img/cImg/AIrecognition9.png&quot;</span><br><span class=\"line\">    /&gt;</span><br><span class=\"line\">    &lt;/view&gt;</span><br><span class=\"line\">    &lt;view class=&quot;text&quot; v-if=&quot;!longPressing&quot;&gt;长按说话&lt;/view&gt;</span><br><span class=\"line\">&lt;/view&gt;</span><br></pre></td></tr></table></figure>\n\n<p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">onLoad</span>&nbsp;&nbsp;钩子中进行监听</p>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 监听语音识别事件</span><br><span class=\"line\">plus.speech.addEventListener(&#x27;start&#x27;, this.ontStart, false);</span><br><span class=\"line\">plus.speech.addEventListener(&#x27;volumeChange&#x27;, this.onVolumeChange, false);</span><br><span class=\"line\">plus.speech.addEventListener(&#x27;recognizing&#x27;, this.onRecognizing, false);</span><br><span class=\"line\">plus.speech.addEventListener(&#x27;recognition&#x27;, this.onRecognition, false);</span><br><span class=\"line\">plus.speech.addEventListener(&#x27;end&#x27;, this.onEnd, false);</span><br></pre></td></tr></table></figure>\n\n<p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\">@longpress=\"startRecognize\"</span>&nbsp;&nbsp;开始识别</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startRecognize() &#123;</span><br><span class=\"line\">    console.log(&#x27;startRecognize&#x27;);</span><br><span class=\"line\">    let options = &#123;</span><br><span class=\"line\">    engine: &#x27;baidu&#x27;,</span><br><span class=\"line\">    lang: &#x27;zh-cn&#x27;,</span><br><span class=\"line\">    userInterface: true,</span><br><span class=\"line\">    continue: false,</span><br><span class=\"line\">    timeout:  60 * 1000,</span><br><span class=\"line\">    punctuation: false</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    plus.speech.startRecognize(options)</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>触发监听相关函数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ontStart() &#123;</span><br><span class=\"line\">    this.title = &#x27;...倾听中...&#x27;;</span><br><span class=\"line\">    this.text = &#x27;&#x27;;</span><br><span class=\"line\">    console.log(&#x27;Event: start&#x27;);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onVolumeChange(e) &#123;</span><br><span class=\"line\">    this.valueWidth = 100*e.volume+&#x27;px&#x27;;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onRecognizing(e) &#123;</span><br><span class=\"line\">    console.log(&#x27;Event: recognizing&#x27;);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onRecognition(e) &#123;</span><br><span class=\"line\">    console.log(e.result,&#x27;e.resulte.resulte.result&#x27;);</span><br><span class=\"line\">    this.text += e.result;</span><br><span class=\"line\">    this.text?(this.text+=&#x27;\\n&#x27;):this.text=&#x27;&#x27;;</span><br><span class=\"line\">    this.text_content = this.text;//将识别的到信息进行赋值</span><br><span class=\"line\">    console.log(&#x27;Event: recognition&#x27;);</span><br><span class=\"line\">    plus.speech.stopRecognize();</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">onEnd() &#123;</span><br><span class=\"line\">    if(!this.text||this.text==&#x27;&#x27;)&#123;</span><br><span class=\"line\">        plus.nativeUI.toast(&#x27;没有识别到内容&#x27;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    this.text_content = this.text;</span><br><span class=\"line\">    plus.speech.stopRecognize();</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>&nbsp;&nbsp<span style=\"background:#e1c953; color:#000;padding:5px 5px\"> @touchend=\"endRecognize\"</span>&nbsp;&nbsp;结束识别</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">endRecognize() &#123;</span><br><span class=\"line\">    console.log(&#x27;endRecognize&#x27;);</span><br><span class=\"line\">    plus.speech.stopRecognize();</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n","feature":true,"text":"前言在hbuilder中引入百度语音识别集成平台，实现 AI语音识别 操作方式引入百度语音 manifest.json 文件 百度 AI 平台获取 key 值h...","permalink":"/post/uniapp之语音识别","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"经验","slug":"经验","count":3,"path":"api/categories/经验.json"}],"tags":[{"name":"uniapp","slug":"uniapp","count":1,"path":"api/tags/uniapp.json"},{"name":"语音识别","slug":"语音识别","count":1,"path":"api/tags/语音识别.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">操作方式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BC%95%E5%85%A5%E7%99%BE%E5%BA%A6%E8%AF%AD%E9%9F%B3\"><span class=\"toc-text\">引入百度语音</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%99%BE%E5%BA%A6-AI-%E5%B9%B3%E5%8F%B0%E8%8E%B7%E5%8F%96-key-%E5%80%BC\"><span class=\"toc-text\">百度 AI 平台获取 key 值</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%94%A4%E8%B5%B7%E7%99%BE%E5%BA%A6%E8%AF%AD%E9%9F%B3\"><span class=\"toc-text\">唤起百度语音</span></a></li></ol></li></ol>","author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"语音识别延伸之滚动定位","uid":"15483feced1e2a527f0fd1a7479d5986","slug":"语音识别延伸之滚动定位","date":"2024-05-24T06:21:42.000Z","updated":"2024-06-27T03:23:12.499Z","comments":true,"path":"api/articles/语音识别延伸之滚动定位.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":null,"text":"前言数组每添加一条数据 scroll-view 需自动滚动到最底部;scroll-view高度动态改变 具体代码scroll-view 的设置主要是设置 scr...","permalink":"/post/语音识别延伸之滚动定位","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"经验","slug":"经验","count":3,"path":"api/categories/经验.json"}],"tags":[{"name":"语音识别 -滚动定位","slug":"语音识别-滚动定位","count":1,"path":"api/tags/语音识别-滚动定位.json"}],"author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"小程序分包","uid":"8cb2683bb6a5c8d0f688364471819883","slug":"小程序分包","date":"2024-05-10T07:08:26.000Z","updated":"2024-06-27T03:22:12.994Z","comments":true,"path":"api/articles/小程序分包.json","keywords":"蔡惠霖的博客，前端开发，Vue，Node.js","cover":[],"text":"前言微信小程序分包常用于代码量较大的小程序，发布时会受到大小限制 什么是分包分包指的是把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包...","permalink":"/post/小程序分包","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"总结","slug":"总结","count":3,"path":"api/categories/总结.json"}],"tags":[{"name":"小程序","slug":"小程序","count":1,"path":"api/tags/小程序.json"}],"author":{"name":"May","slug":"blog-author","avatar":"https://chlblog.oss-cn-guangzhou.aliyuncs.com/logo.jpg","link":"/","description":"Love Music, love life","socials":{"github":"https://github.com/ShuHongXie","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}